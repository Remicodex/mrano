<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Teachers Day!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Basic Setup */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            background-color: #000;
            color: #e5e7eb;
            font-family: 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            overflow: hidden;
        }

        /* Phase 1: Running Pixel Text Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            z-index: 100;
        }

        #loading-screen.explode {
            opacity: 0;
            transform: scale(2);
            pointer-events: none;
        }

        #pixel-text-container {
            display: flex;
            flex-direction: row;
            white-space: nowrap;
            animation: marquee 15s linear infinite;
            will-change: transform;
        }

        @keyframes marquee {
            0%  {
                transform: translateX(75%);
            }
            100% {
                transform: translateX(-100%);
            }
        }

        .letter {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 6px;
            margin: 0 24px;
            flex-shrink: 0;
        }

        .pixel {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        .pixel.on {
            background-color: #e5e7eb;
            box-shadow: 0 0 7px #e5e7eb;
        }

        .pixel.off {
            background-color: transparent;
        }
        
        .pixel.heart {
            background-color: #ef4444;
            box-shadow: 0 0 9px #ef4444, 0 0 16px #ef4444;
        }
        
        .pixel.fire {
            background-color: #f97316;
            box-shadow: 0 0 9px #f97316, 0 0 16px #f97316;
        }
        
        .pixel.paddle {
            background-color: #3b82f6;
            box-shadow: 0 0 7px #3b82f6;
        }

        .emoji-char {
            font-size: 90px;
            line-height: 114px;
            margin: 0 24px;
            display: inline-block;
            vertical-align: top;
            flex-shrink: 0;
        }

        /* Phase 2: Student Messages Screen */
        #main-screen {
            display: none;
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            background-color: #1f2937;
            opacity: 0;
            transition: opacity 0.5s ease-in 0.3s;
            text-align: center;
            padding: 2rem;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }

        /* Background media: image (preferred) or video fallback */
        #background-image {
            position: fixed;
            inset: 0; /* top:0; right:0; bottom:0; left:0 */
            width: 100vw;
            height: 100vh;
            z-index: 0;
            object-fit: cover;
            object-position: center center;
            pointer-events: none; /* allow clicks to pass through to UI */
        }

        /* keep a rule for a possible video fallback */
        #background-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: 0;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }

        #video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 1;
        }
        
        #main-screen h1, #message-grid {
            position: relative;
            z-index: 2;
        }
        
        #main-screen.visible {
            display: flex;
            opacity: 1;
        }

        #main-screen h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2.5rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.7);
        }

        #message-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2.5rem;
            max-width: 95%;
            width: 100%;
            margin: 0 auto;
            justify-items: center;
        }
        
        @media (max-width: 640px) {
            #message-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: 100%;
                gap: 1.5rem;
            }
        }
        
        @media (min-width: 641px) and (max-width: 1024px) {
             #message-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 2rem;
            }
        }
        
        @media (min-width: 1025px) {
             #message-grid {
                grid-template-columns: repeat(7, 1fr);
                gap: 3rem;
            }
        }

        .student-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .student-item:hover {
            transform: scale(1.05);
        }

        .student-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #27272a;
            border: 3px solid #52525b;
            margin-bottom: 0.75rem;
            overflow: hidden;
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
            transition: box-shadow 0.2s ease;
        }

        .student-item:hover .student-photo {
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5);
            border-color: #3b82f6;
        }

        .student-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .student-name {
            font-size: 1rem;
            color: #e5e7eb;
            font-weight: 500;
            margin: 0;
            text-align: center;
        }

        /* Message Modal */
        #message-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            box-sizing: border-box;
            z-index: 200;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        #message-modal.visible {
            display: flex;
            opacity: 1;
        }

        #modal-content {
            background: #18181b;
            padding: 2.5rem;
            border-radius: 12px;
            border: 1px solid #3f3f46;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            transform: scale(0.9);
            transition: transform 0.3s ease;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        #message-modal.visible #modal-content {
            transform: scale(1);
        }

        #modal-message {
            font-size: 1.25rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            white-space: pre-wrap;
        }

        #modal-author {
            font-size: 1.1rem;
            font-weight: 700;
            text-align: right;
            color: #a1a1aa;
        }

        #modal-close-btn {
            background-color: #3f3f46;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            margin-top: 1rem;
            display: block;
            width: 100%;
            transition: background-color 0.2s ease;
        }
        
        #modal-close-btn:hover {
            background-color: #52525b;
        }

        /* Loading progress and skip button removed */

    </style>
</head>
<body>

    <!-- Phase 1: Running Pixel Text -->
    <div id="loading-screen" title="Tap to continue">
        <div id="pixel-text-container"></div>
        <!-- progress bar and skip button removed -->
    </div>

    <!-- Phase 2: Student Messages -->
    <div id="main-screen">
        <div id="video-overlay"></div>
        <img id="background-image" src="extenc.jpg" alt="Background image" onerror="this.onerror=null; this.src='https://placehold.co/1600x900/1f2937/ffffff?text=Background';" />

        <h1> Letter from US </h1>
        <div id="message-grid">
            <!-- Student buttons will be generated by JavaScript -->
        </div>
    </div>

    <!-- Message Modal -->
    <div id="message-modal">
        <div id="modal-content">
            <p id="modal-message">Message text goes here...</p>
            <p id="modal-author">- Author</p>
            <button id="modal-close-btn">Close</button>
        </div>
    </div>

    <script>
        // --- PIXEL FONT DATA (5x5) ---
        const PIXEL_FONT = {
            'H': [1,0,0,0,1, 1,0,0,0,1, 1,1,1,1,1, 1,0,0,0,1, 1,0,0,0,1],
            'A': [0,1,1,1,0, 1,0,0,0,1, 1,1,1,1,1, 1,0,0,0,1, 1,0,0,0,1],
            'P': [1,1,1,1,0, 1,0,0,0,1, 1,1,1,1,0, 1,0,0,0,0, 1,0,0,0,0],
            'Y': [1,0,0,0,1, 1,0,0,0,1, 0,1,1,1,0, 0,0,1,0,0, 0,0,1,0,0],
            ' ': [0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0],
            'T': [1,1,1,1,1, 0,0,1,0,0, 0,0,1,0,0, 0,0,1,0,0, 0,0,1,0,0],
            'E': [1,1,1,1,1, 1,0,0,0,0, 1,1,1,1,0, 1,0,0,0,0, 1,1,1,1,1],
            'C': [0,1,1,1,0, 1,0,0,0,1, 1,0,0,0,0, 1,0,0,0,1, 0,1,1,1,0],
            'R': [1,1,1,1,0, 1,0,0,0,1, 1,1,1,1,0, 1,0,0,1,0, 1,0,0,0,1],
            'S': [0,1,1,1,1, 1,0,0,0,0, 0,1,1,1,0, 0,0,0,0,1, 1,1,1,1,0],
            'D': [1,1,1,1,0, 1,0,0,0,1, 1,0,0,0,1, 1,0,0,0,1, 1,1,1,1,0],
            'M': [1,0,0,0,1, 1,1,0,1,1, 1,0,1,0,1, 1,0,0,0,1, 1,0,0,0,1],
            '.': [0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,0,1,0,0],
            'N': [1,0,0,0,1, 1,1,0,0,1, 1,0,1,0,1, 1,0,0,1,1, 1,0,0,0,1],
            'O': [0,1,1,1,0, 1,0,0,0,1, 1,0,0,0,1, 1,0,0,0,1, 0,1,1,1,0],
            'K': [1,0,0,1,0, 1,0,1,0,0, 1,1,0,0,0, 1,0,1,0,0, 1,0,0,1,0],
            '!': [0,0,1,0,0, 0,0,1,0,0, 0,0,1,0,0, 0,0,0,0,0, 0,0,1,0,0],
        };

        // --- STUDENT MESSAGES DATA ---
        const STUDENT_MESSAGES = [
            { name: "Addo", msg: "Happy Teachers Day, Mr. Ano!", photoUrl: "addo.jpg", audioUrl: "addo.mp3" },
            { name: "Akmal", msg: "Ke taman lihat bunga melati, \nTak sengaja injak kulit salak. \nSelamat Hari Guru wahai pemberi motivasi, \nWalau raju bawel, tetap sabar dan bijak!", photoUrl: "akmal.jpg", audioUrl: "akmal.mp3" },
            { name: "Aqilah", msg: "Selamat Hari Guru! Terima kasih untuk semua kebaikan dan ilmu yang Bapak berikan. Terima kasih juga untuk pak Ano karena sudah membimbing saya dari osk tahun 2024. Saya doakan bapak suukses dan sehat selalu, aamiin", photoUrl: "Aqilah.jpg", audioUrl: "aqila.mp3" },
            { name: "Arnay", msg: "Dear Mr. Ano, you've inspired me...", photoUrl: "arnay.jpg", audioUrl: "arnay.mp3" },
            { name: "Bagas", msg: "bang sodik pergi makan laksa, \nlanjut ke UI ketemu si Asa, \nPak Ano pahlawan tanpa tanda jasa, \npenerang ilmu sepanjang masa", photoUrl: "bagas.jpg", audioUrl: "bagas.mp3" },
            { name: "Dzaki", msg: "ikan Teri ikan Tongkol, selamat hari guru bapakkk ", photoUrl: "dzaki.jpg", audioUrl: "dzaki.mp3" },
            { name: "Qey", msg: "Thank you for your guidance...", photoUrl: "qey.jpg", audioUrl: "qey.mp3" },
            { name: "Ghina", msg: "Happy Teachers Day to our favorite teacher!", photoUrl: "ghina.jpg", audioUrl: "ghina.mp3" },
            { name: "Kaysan", msg: "Your passion for teaching is inspiring.", photoUrl: "kaysan.jpg", audioUrl: "kaysan.mp3" },
            { name: "Keke", msg: "Thanks for always pushing us...", photoUrl: "keke.jpg", audioUrl: "keke.mp3" },
            { name: "Lukluk", msg: "We're so lucky to have you...", photoUrl: "lukluk.jpg", audioUrl: "lukluk.mp3" },
            { name: "Ripras", msg: "Terima kasih Pak Ano atas ilmu dan pencerahannya selama ini. Karena bapak, saya jadi pede belajar matematika dan yakin akan kemampuan saya sendiri. Pak Ano, bapak keren banget dah asleeeees", photoUrl: "ripras.jpg", audioUrl: "ripras.mp3" },
            { name: "Kanaz", msg: "Happy Teachers Day, pak Ano! Terimakasih atas semua ilmu, bimbingan, dan kesabaran dalam mengajar kami selama ini. Semoga selalu sehat biar bisa maen ping pong tiap hari.", photoUrl: "kanaz.jpg", audioUrl: "kanaz.mp3" },
            { name: "Gebi", msg: "To the best teacher, Happy Teachers Day!", photoUrl: "gebi.jpg", audioUrl: "gebi.mp3" },
            { name: "Pinan", msg: "assalamualaikum bapakk, selamat hari guru buat pak anooo.semoga bapak sehat selalu, bahagia selalu, dimudahkan rezekinya selalu, dan jadi wali kelas kita selalu pakk..", photoUrl: "pinan.jpg", audioUrl: "pinan.mp3" },
            { name: "Salwa", msg: "We've learned so much from you.", photoUrl: "salwa.jpg", audioUrl: "salwa.mp3" },
            { name: "Ripat", msg: "Happy Teachers Day, Mr. Ano! You're a true inspiration.", photoUrl: "ripat.jpg", audioUrl: "ripat.mp3" },
            { name: "Shiddiq", msg: "Selamat Hari Guru pak anoo ! Terima kasih sudah sabar â€œmengintegralkanâ€ kami dari nol sampai paham.", photoUrl: "shiddiq.jpg", audioUrl: "hiddiq.mp3" },
            { name: "Thariq", msg: "Wishing you a very Happy Teachers Day!", photoUrl: "thariq.jpg", audioUrl: "thariq.mp3" },
            { name: "Ubay", msg: "Maaf pak baru belajar HTML", photoUrl: "ubay.jpg", audioUrl: "ubay.mp3" },
            { name: "Waldan", msg: "Thank you for your endless patience...", photoUrl: "waldan.jpg", audioUrl: "waldan.mp3" },
        ];
 
        /**
         * Renders the pixel text into the container
         */
        function renderPixelText(text, container) {
            container.innerHTML = '';
            const chars = Array.from(text);
            
            for (const char of chars) {
                if (['ðŸ“', 'â¤ï¸â€ðŸ”¥'].includes(char)) {
                    const emojiEl = document.createElement('span');
                    emojiEl.className = 'emoji-char';
                    emojiEl.textContent = char;
                    container.appendChild(emojiEl);
                } else {
                    const fontData = PIXEL_FONT[char.toUpperCase()] || PIXEL_FONT[' '];
                    const letterEl = document.createElement('div');
                    letterEl.className = 'letter';
                    
                    for (const bit of fontData) {
                        const pixelEl = document.createElement('div');
                        let pixelClass = 'pixel ';
                        
                        switch(bit) {
                            case 1: pixelClass += 'on'; break;
                            case 2: pixelClass += 'on heart'; break;
                            case 3: pixelClass += 'on fire'; break;
                            case 4: pixelClass += 'on paddle'; break;
                            default: pixelClass += 'off';
                        }
                        
                        pixelEl.className = pixelClass;
                        letterEl.appendChild(pixelEl);
                    }
                    container.appendChild(letterEl);
                }
            }
        }
        
        /**
         * Populates the message grid with buttons
         */
        function renderMessageGrid(messages, gridContainer) {
            gridContainer.innerHTML = '';
            messages.forEach((student, index) => {
                const itemWrapper = document.createElement('div');
                itemWrapper.className = 'student-item';
                itemWrapper.dataset.index = index;

                const photoEl = document.createElement('div');
                photoEl.className = 'student-photo';
                
                const imgEl = document.createElement('img');
                imgEl.src = student.photoUrl;
                imgEl.alt = student.name;
                imgEl.onerror = () => { imgEl.src = `https://placehold.co/100x100/e0e0e0/777?text=Photo`; };
                
                photoEl.appendChild(imgEl);

                const nameEl = document.createElement('p');
                nameEl.className = 'student-name';
                nameEl.textContent = student.name;

                itemWrapper.appendChild(photoEl);
                itemWrapper.appendChild(nameEl);
                
                gridContainer.appendChild(itemWrapper);
            });
        }

        // --- Main Execution ---
        document.addEventListener('DOMContentLoaded', () => {
            const loadingScreen = document.getElementById('loading-screen');
            const mainScreen = document.getElementById('main-screen');
            const pixelTextContainer = document.getElementById('pixel-text-container');
            const messageGrid = document.getElementById('message-grid');
            
            const modal = document.getElementById('message-modal');
            const modalMessage = document.getElementById('modal-message');
            const modalAuthor = document.getElementById('modal-author');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            // Shared audio player for modal voice messages
            const modalAudio = new Audio();
            modalAudio.preload = 'auto';
            modalAudio.onerror = () => {
                // If audio fails to load, silently ignore (user can still read message)
            };

            let transitionTimeout;

            // 1. Render the initial pixel text
            const textToRender = "HAPPY TEACHERS DAY PAK ANO!!!";
            renderPixelText(textToRender, pixelTextContainer);

            // 2. Render the student message buttons
            renderMessageGrid(STUDENT_MESSAGES, messageGrid);
            
            // 3. Function to transition screens
            function transitionToMain() {
                loadingScreen.classList.add('explode');
                mainScreen.classList.add('visible');
                clearTimeout(transitionTimeout);
            }
            
            // 4. Set up AUTOMATIC transition after 15 seconds
            transitionTimeout = setTimeout(transitionToMain, 15000);

            // 5. Click anywhere on the loading screen to transition
            loadingScreen.addEventListener('click', () => {
                transitionToMain();
            });

            // 7. Set up message grid button clicks
            messageGrid.addEventListener('click', (e) => {
                const clickedItem = e.target.closest('.student-item');
                
                if (clickedItem) {
                    const index = clickedItem.dataset.index;
                    const student = STUDENT_MESSAGES[index];

                    // stop any playing audio
                    try { modalAudio.pause(); modalAudio.currentTime = 0; } catch (e) {}

                    modalMessage.textContent = student.msg;
                    modalAuthor.textContent = `- ${student.name}`;
                    modal.classList.add('visible');

                    // Play student's voice message if provided
                    if (student.audioUrl) {
                        modalAudio.src = student.audioUrl;
                        modalAudio.currentTime = 0;
                        // play() returns a promise; ignore rejections (autoplay/policy)
                        modalAudio.play().catch(() => {
                            // autoplay may be blocked by browser; since user clicked, it usually succeeds
                        });
                    }
                }
            });
            
            // 8. Modal close function
            function closeModal() {
                modal.classList.remove('visible');
                try { modalAudio.pause(); modalAudio.currentTime = 0; } catch (e) {}
            }
            
            modalCloseBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'message-modal') {
                    closeModal();
                }
            });

            // 9. Keyboard shortcut to close modal
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('visible')) {
                    closeModal();
                }
            });
        });

    </script>
</body>

</html>
